{% extends 'base.html' %}

{% block title %}记录数据管理{% endblock %}


{#主空间#}
{% block container %}

{#    第一行，留空，上传按钮那些#}

    <div class="row section">
    <h5>上传新数据</h5>
{#    上传数据按钮 #}
    <div class="file-field col s4">
      <div class="btn">
        <span>选择文件</span>
        <input type="file"  id="uploadfile" name="table">
      </div>
      <div class="file-path-wrapper">
        <input class="file-path validate"   type="text" placeholder="上传一个excel文件">
      </div>

    </div>

    <div class="col s4"><a class="btn" id="upload" onclick="upload()">上传</a></div>


    </div>


{#  ----------------------------------------  表格 #}
    <div class="row ">
    <h5>已上传数据列表</h5>
    <div class="col s12">

        {% raw %}
        <table id="records">
        <thead><tr><th>文件名</th> <th>上传时间</th> <th>数据总行数</th> <th>数据状态</th><th>操作</th></tr></thead>
            <tbody >
            <template v-for="record in records">
                <tr>
                    <td>{{ record.title }}</td>
                    <td>{{ record.time }}</td>
                    <td>{{ record.size }}</td>
                    <td>{{ record.status }}</td>

                    <td>
                         <a class="dropdown-trigger btn" v-bind:data-target="'action'+record.id">操作</a>
                        <ul v-bind:id="'action'+record.id" class="dropdown-content">
    <li><a class="modal-trigger" href="#modal_info" v-bind:data-id="record.id">信息</a></li>
    <li><a  v-on:click='delete_item(record.id)'>删除</a></li>
    <li><a v-on:click='import_item(record.id)'>重新导入数据</a></li>
    </ul>

                    </td>
                </tr>
            </template>

            </tbody>

        </table>
        {% endraw %}

    </div>

    </div>



{#-----------------------预览信息界面  模态框----------------#}
{#bottom-sheet显示在底部#}
    <div class="modal bottom-sheet" id="modal_info">

    <div class="modal-content"></div>
    <h4>数据预览(随机10条) </h4>
        <div class="progress" id="progress_info" ><div class="indeterminate"></div></div>
{#responsive-table 设置在小屏幕时可以水平滑动#}
        <table id="previewtable" class="responsive-table highlight centered">

        </table>

    <div class="modal-footer">
         <a href="#!" class="modal-close waves-effect waves-green btn-flat">关闭</a>
    </div>
    </div>


{% endblock %}


{# 导入数据的界面 #}


{% block script %}
    <script type="text/javascript"  src="{{ url_for('static',filename='admin/admin.js') }}"></script>
{% endblock %}